<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Shotgun ObjC Api: Shotgun API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Icon.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Shotgun ObjC Api&#160;<span id="projectnumber">0.1b</span></div>
   <div id="projectbrief">Objective C API to talk to a Shotgun Instance</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Shotgun API </div>  </div>
</div>
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="toc"></a>
Table of Contents</h2>
<ul>
<li>
<a class="el" href="index.html#Introduction">Introduction</a> </li>
<li>
<a class="el" href="index.html#Installation">Installation</a> </li>
<li>
<a class="el" href="index.html#Notes">Notes</a> </li>
<li>
<a class="el" href="index.html#details">API Details</a> <ul>
<li>
<a class="el" href="index.html#connecting">Connecting to Shotgun</a> </li>
<li>
<a class="el" href="index.html#finding">Finding entities</a> </li>
<li>
<a class="el" href="index.html#modifying">Creating, modifying, deleting, and reviving entities</a> </li>
<li>
<a class="el" href="index.html#batch">Batch operations</a> </li>
<li>
<a class="el" href="index.html#schema">Meta-Schema queries</a> </li>
<li>
<a class="el" href="index.html#files">Uploading and downloading files</a> </li>
<li>
<a class="el" href="index.html#requests">Using ShotgunRequest Objects</a> </li>
</ul>
</li>
<li>
<a class="el" href="index.html#TODOs">TODOs</a> </li>
<li>
<a class="el" href="index.html#Dependencies">Dependencies</a> </li>
<li>
<a class="el" href="index.html#Links">Links</a> </li>
</ul>
<h2><a class="anchor" id="Introduction"></a>
Introduction</h2>
<p>This is an objective c port of the python shotgun api.</p>
<p>For complete documentation of how the Python Shotgun API works along with tutorials, examples, and other details see:<br/>
 <a href="https://github.com/shotgunsoftware/python-api/wiki">https://github.com/shotgunsoftware/python-api/wiki</a></p>
<h2><a class="anchor" id="Installation"></a>
Installation</h2>
<ul>
<li>
Start by downloading the code from <a href="https://github.com/shotgunsoftware/objc-api">https://github.com/shotgunsoftware/objc-api</a> </li>
<li>
Copy the files in Classes directory into your project. </li>
<li>
Copy the dependencies into your project.<br/>
<br/>
 All the dependencies are included as git submodules in the Dependencies directory.<br/>
 You can either download the dependencies yourself or (if you cloned the project via<br/>
 git rather than downloading the tarball) run 'git submodule init' followed by<br/>
 'git submodule update' to download the projects at the revision as of the writing of<br/>
 this library.<br/>
<br/>
 <ul>
<li>
<b>json-framework</b> - Copy the files in Classes into your project. </li>
<li>
<b>asi-http-request</b> (<em>See the <a href="http://allseeing-i.com/ASIHTTPRequest/Setup-instructions">official docs</a> for more in depth instructions).</em> <ul>
<li>
Copy the files in Classes into your project (just the files, the directories are not needed) </li>
<li>
Copy the files in External/Reachability into your project. </li>
<li>
Link against CFNetwork, SystemConfiguration, MobileCoreServices, CoreGraphics and zlib </li>
</ul>
</li>
</ul>
</li>
</ul>
<p>See the example project under Examples to see what the resulting setup should look like. </p>
<ul>
<li>To get the example project or unit tests to run you need to copy the Config.plist.template file to Config.plist and update the values for your shotgun server.</li>
</ul>
<h2><a class="anchor" id="Notes"></a>
Notes</h2>
<ul>
<li>All Date objects are assumed to be in UTC (This is the default NSDate behavior). </li>
<li>The default NSOperationQueue for ShotgunRequests will run up to 4 requests concurrently.</li>
</ul>
<h2><a class="anchor" id="details"></a>
API Details</h2>
<h3><a class="anchor" id="connecting"></a>
Connecting to Shotgun</h3>
<div class="fragment"><pre class="fragment">  NSString *url = <span class="stringliteral">@&quot;http://mysite.shotgunsoftware.com&quot;</span>;
  NSString *script = <span class="stringliteral">@&quot;example_script&quot;</span>;
  NSString *key = <span class="stringliteral">@&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>;
  <a class="code" href="interface_shotgun.html" title="Represents a connection to a shotgun server.">Shotgun</a> *shotgun = [[[<a class="code" href="interface_shotgun.html" title="Represents a connection to a shotgun server.">Shotgun</a> alloc] initWithUrl:url scriptName:script andKey:key] autorelease];
</pre></div><h3><a class="anchor" id="finding"></a>
Finding entities</h3>
<div class="fragment"><pre class="fragment">  <a class="code" href="interface_shotgun_request.html" title="Represents a simple request being made to a Shotgun instance.">ShotgunRequest</a> *request = 
    [shotgun findEntityOfType:<span class="stringliteral">@&quot;Version&quot;</span>
                  withFilters:<span class="stringliteral">@&quot;[[\&quot;</span>code\<span class="stringliteral">&quot;, \&quot;starts_with\&quot;, \&quot;100\&quot;]]&quot;</span>
                    andFields:<span class="stringliteral">@&quot;[\&quot;</span>code\<span class="stringliteral">&quot;, \&quot;image\&quot;]&quot;</span>];
  [request startSynchronous];
  NSArray *results = [request response];
</pre></div><h3><a class="anchor" id="modifying"></a>
Creating, modifying, deleting, and reviving entities</h3>
<div class="fragment"><pre class="fragment">  <a class="code" href="interface_shotgun_entity.html" title="Represents a Shotgun entity.">ShotgunEntity</a> *shot = [[shotgun createEntityOfType:<span class="stringliteral">@&quot;Shot&quot;</span>
                withData:<span class="stringliteral">@&quot;{\&quot;</span>code\<span class="stringliteral">&quot;: \&quot;s10\&quot;, \&quot;description\&quot;: \&quot;Shot 10\&quot;}&quot;</span>] startSynchronous];
</pre></div> <div class="fragment"><pre class="fragment">  <a class="code" href="interface_shotgun_request.html" title="Represents a simple request being made to a Shotgun instance.">ShotgunRequest</a> *request = [shotgun updateEntityOfType:<span class="stringliteral">@&quot;Shot&quot;</span>
                                            withId:[NSNumber numberWithInt:23]
                                          withData:<span class="stringliteral">@&quot;{\&quot;</span>description\<span class="stringliteral">&quot;: \&quot;Shot 20 - More Info\&quot;}&quot;</span>];
  <a class="code" href="interface_shotgun_entity.html" title="Represents a Shotgun entity.">ShotgunEntity</a> *shot = [request startSynchronous];
</pre></div> <div class="fragment"><pre class="fragment">  <a class="code" href="interface_shotgun_request.html" title="Represents a simple request being made to a Shotgun instance.">ShotgunRequest</a> *request = [shotgun deleteEntityOfType:<span class="stringliteral">@&quot;Shot&quot;</span> withId:[NSNumber numberWithInt:23]];
  [request startSynchronous];
  BOOL success = [[request response] boolValue];
</pre></div> <div class="fragment"><pre class="fragment">  <a class="code" href="interface_shotgun_request.html" title="Represents a simple request being made to a Shotgun instance.">ShotgunRequest</a> *request = [shotgun reviveEntityOfType:<span class="stringliteral">@&quot;Shot&quot;</span> withId:[NSNumber numberWithInt:23]];
  [request startSynchronous];
  BOOL success = [[request response] boolValue];
</pre></div><h3><a class="anchor" id="batch"></a>
Batch operations</h3>
<div class="fragment"><pre class="fragment">  <a class="code" href="interface_shotgun_request.html" title="Represents a simple request being made to a Shotgun instance.">ShotgunRequest</a> *request = [shotgun batch:<span class="stringliteral">@&quot;[&quot;</span> \
      <span class="stringliteral">&quot;{                                 &quot;</span> \
      <span class="stringliteral">&quot; \&quot;request_type\&quot;: \&quot;create\&quot;,    &quot;</span> \
      <span class="stringliteral">&quot; \&quot;entity_type\&quot;:  \&quot;Shot\&quot;,      &quot;</span> \
      <span class="stringliteral">&quot; \&quot;data\&quot;: {                      &quot;</span> \
      <span class="stringliteral">&quot;     \&quot;code\&quot;: \&quot;s10\&quot;,           &quot;</span> \
      <span class="stringliteral">&quot;     \&quot;description\&quot;: \&quot;Shot 10\&quot; &quot;</span> \
      <span class="stringliteral">&quot;   }                              &quot;</span> \
      <span class="stringliteral">&quot;},                                &quot;</span> \
      <span class="stringliteral">&quot;{\&quot;request_type\&quot;: \&quot;delete\&quot;, \&quot;entity_type\&quot;: \&quot;Shot\&quot;, \&quot;entity_id\&quot;: 23}&quot;</span> \
    ]<span class="stringliteral">&quot;];</span>
<span class="stringliteral">  [request startSynchronous];</span>
<span class="stringliteral">  NSArray *results = [request response];</span>
</pre></div><h3><a class="anchor" id="schema"></a>
Meta-Schema queries</h3>
<div class="fragment"><pre class="fragment">  <a class="code" href="interface_shotgun_request.html" title="Represents a simple request being made to a Shotgun instance.">ShotgunRequest</a> *request = [shotgun schemaEntityRead];
  [request startSynchronous];
  NSDictionary *schemaInfo = [request response];
</pre></div> <div class="fragment"><pre class="fragment">  <a class="code" href="interface_shotgun_request.html" title="Represents a simple request being made to a Shotgun instance.">ShotgunRequest</a> *request = [shotgun schemaRead];
  [request startSynchronous];
  NSDictionary *schema = [request response];
</pre></div> <div class="fragment"><pre class="fragment">  <a class="code" href="interface_shotgun_request.html" title="Represents a simple request being made to a Shotgun instance.">ShotgunRequest</a> *request = [shotgun schemaFieldReadForEntityOfType:<span class="stringliteral">@&quot;Shot&quot;</span> forField:<span class="stringliteral">@&quot;sg_status_list&quot;</span>];
  [request startSynchronous];
  NSDictionary *entitySchema = [request response];
</pre></div><h3><a class="anchor" id="files"></a>
Uploading and downloading files</h3>
<div class="fragment"><pre class="fragment">  NSNumber *attachmentId = [shotgun uploadThumbnailForEntityOfType:<span class="stringliteral">@&quot;Shot&quot;</span>
                                         withId:[NSNumber numberWithInt:23]
                                       fromPath:<span class="stringliteral">@&quot;/path/to/the/file.jpg&quot;</span>];
</pre></div> <div class="fragment"><pre class="fragment">  NSData *imageData = downloadAttachmentWithId:[NSNumber numberWithInt:201];
</pre></div><h3><a class="anchor" id="requests"></a>
Using ShotgunRequest Objects</h3>
<p>ShotgunRequests can be run either synchronously or asynchronously.</p>
<p>To run a request syncronously simply call startSyncronously: </p>
<div class="fragment"><pre class="fragment">  [request startSyncronous];
</pre></div><p> The request will block the current thread until it is finished and its response is ready.</p>
<p>To run a request asynchronously call startAsynchronous: </p>
<div class="fragment"><pre class="fragment">  [request startAsynchronous];
</pre></div><p> Control will return to the current thread right away. To process the response to the request, register callback blocks with request before starting it: </p>
<div class="fragment"><pre class="fragment">  [request setCompletionBlock:^{
     <span class="keywordtype">id</span> response = [request response];
     <span class="comment">// Do Stuff with the response</span>
  }];
</pre></div><p>The currently supported callbacks are: </p>
<ul>
<li>startedBlock - Called when the request is started. </li>
<li>completionBlock - Called when the request has finished. </li>
<li>failedBlock - Called when the request failed.</li>
</ul>
<p>The postProcessBlock is used internally to the API and should not be overridden.</p>
<h3><a class="anchor" id="shotgunEntities"></a>
ShotgunEntities</h3>
<p>Any dictionary returned by a create, update, or find call is a <a class="el" href="interface_shotgun_entity.html" title="Represents a Shotgun entity.">ShotgunEntity</a> object which adds some shotgun specific logic on top of an NSMutableDictionary. </p>
<div class="fragment"><pre class="fragment">  <a class="code" href="interface_shotgun_entity.html" title="Represents a Shotgun entity.">ShotgunEntity</a> *entity = [request response];
  NSLog(<span class="stringliteral">@&quot;My entity type is %@ , my entity id is %@&quot;</span>, entity.<a class="code" href="interface_shotgun_entity.html#a729ad89492821607dbe65c36f88a7950" title="The type of the entity in Shotgun.">entityType</a>, entity.<a class="code" href="interface_shotgun_entity.html#ad0d9a488012066062fa6c4f7137ec21f" title="The id of the entity in Shotgun.">entityId</a>);
</pre></div><h3><a class="anchor" id="dates"></a>
Dates</h3>
<p>All dates handled by the API are UTC dates (the default timezone for NSDate objects).<br/>
 date_time fields in shotgun are returned as <a class="el" href="interface_shotgun_date_time.html" title="A thin wrapper around NSDate to be able to differentiate date objects from datetime objects...">ShotgunDateTime</a> objects. date fields in shotgun are returned as strings ("YYYY-MM-DD") like in the Python API.<br/>
 When passing dates into the API, NSDate objects are not allowed, you must use <a class="el" href="interface_shotgun_date.html" title="A thin wrapper around NSDate to be able to differentiate date objects from datetime objects...">ShotgunDate</a> or <a class="el" href="interface_shotgun_date_time.html" title="A thin wrapper around NSDate to be able to differentiate date objects from datetime objects...">ShotgunDateTime</a> objects.</p>
<h2><a class="anchor" id="Dependencies"></a>
Dependencies</h2>
<ul>
<li>ASIHTTPRequest: <a href="http://allseeing-i.com/ASIHTTPRequest/">http://allseeing-i.com/ASIHTTPRequest/</a> </li>
<li>SBJson: <a href="http://stig.github.com/json-framework/">http://stig.github.com/json-framework/</a> </li>
<li>GHUnit (only needed to run the unit tests): <a href="https://github.com/gabriel/gh-unit">https://github.com/gabriel/gh-unit</a></li>
</ul>
<h2><a class="anchor" id="Links"></a>
Links</h2>
<ul>
<li>Python API: <a href="https://github.com/shotgunsoftware/python-api">https://github.com/shotgunsoftware/python-api</a> </li>
<li>Mailing List: <a href="https://groups.google.com/group/shotgun-objc-api">https://groups.google.com/group/shotgun-objc-api</a> </li>
<li>Issues: <a href="https://github.com/shotgunsoftware/objc-api/issues">https://github.com/shotgunsoftware/objc-api/issues</a></li>
</ul>
<h2><a class="anchor" id="TODOs"></a>
TODOs</h2>
<ul>
<li>Switch from Exceptions to NSErrors </li>
<li>Add support for responding to events via delegate SELs </li>
<li>Add support for asychronous image field resolution </li>
<li>Better API around paging </li>
<li>Finish documentation </li>
<li>Round out unit tets. Use <a href="http://www.mulle-kybernetik.com/software/OCMock/">OCMock</a>. </li>
<li>Switch to a decent logging system </li>
<li><a class="el" href="todo.html">Other inline TODOs</a></li>
</ul>
<p>Rob Blau &lt;<a href="mailto:rblau@laika.com">rblau@laika.com</a>&gt; </p>
</div></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Properties</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Thu Jun 23 2011 18:12:30 for Shotgun ObjC Api by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
